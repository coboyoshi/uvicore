<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.4" />
<title>uvicore.foundation.application API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>uvicore.foundation.application</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import os
import sys
from collections import OrderedDict as ODict
from typing import Dict, List, NamedTuple, OrderedDict, Tuple

import uvicore
from uvicore import config
from uvicore.configuration import Config
from uvicore.contracts import Application as ApplicationInterface
from uvicore.contracts import Server as ServerInterface
from uvicore.contracts import Config as ConfigInterface
from uvicore.contracts import Package as PackageInterface
from uvicore.contracts import Template as TemplateInterface
from uvicore.support.dumper import dd, dump
from uvicore.support.module import load, location
from uvicore.http import templates

from ..database.connection import Connection
from .cli import cli

class __Cock:
    pass


class _Application(ApplicationInterface):

    # Version and debug
    version: str = uvicore.__version__
    debug: bool = False
    perfs: List = []

    # Core Applications and Access Points
    http: ServerInterface = None
    template: TemplateInterface = None
    cli: cli = None
    config: ConfigInterface = None

    # Providers and Configs
    providers: List[Tuple] = []

    # App info
    registered: bool = False
    booted: bool = False
    is_console: bool = False
    is_http: bool = False
    is_async: bool = False

    # Packages and Parent
    packages: List[PackageInterface] = []
    path: str = None
    name: str = None
    vendor: str = None
    module: str = None

    def __init__(self):
        # Instantiate uvicore singletons
        uvicore.config = Config()

        # Pass through attributes
        self.config = uvicore.config

    def bootstrap(self, app_config: Dict, path: str, is_console: bool) -&gt; None:
        # Don&#39;t bootstrap multiple times
        if self.booted: return self

        # App name and base_path
        self.path = path
        self.name = app_config.get(&#39;name&#39;)
        self.vendor = app_config.get(&#39;vendor&#39;)
        self.module = app_config.get(&#39;module&#39;)

        # Detect if running in console (to register commands)
        # Ensure console is False even when running ./uvicore http serve
        self.is_console = is_console
        if &#34;&#39;http&#39;, &#39;serve&#39;&#34; in str(sys.argv):
            self.is_console = False
        self.is_http = not self.is_console

        # Always set the cli instance, though commands won&#39;t be added if not is_console
        self.cli = cli

        # Add main app config
        self.config.set(&#39;app&#39;, app_config)

        # Detect debug flag from main app config
        self.debug = app_config[&#39;debug&#39;]

        # Perf
        self.perf(&#39;|-foundation.application.bootstrap()&#39;)
        self.perf(&#39;|--is_console: &#39; + str(self.is_console))

        # Build recursive providers graph
        self.__build_provider_graph(self.module)

        # Register all providers
        self.__register_providers()

        # Merge Providers (merges configs and creates actual Package class)
        self.__merge_providers()

        # Create HTTP Server instance
        self.__create_http_server()

        # Create Database instance
        self.__create_database_instance()

        # Boot all providers
        self.__boot_providers()

        # Mount static asset route
        self.__mount_static_assets()

        # Create templating Environment
        self.__create_template_environment()

        # Return application
        return self

    def __create_http_server(self) -&gt; None:
        if self.is_http:
            self.perf(&#39;|--firing up HTTP server&#39;)
            from uvicore.http import Server
            self.http = Server(
                debug=self.config(&#39;app.debug&#39;),
                title=self.config(&#39;app.openapi.title&#39;),
                version=uvicore.__version__,
                openapi_url=self.config(&#39;app.openapi.url&#39;),
                docs_url=self.config(&#39;app.openapi.docs_url&#39;),
                redoc_url=self.config(&#39;app.openapi.redoc_url&#39;),
            )
            self.is_async = True

    def __create_database_instance(self) -&gt; None:
        # Fire up Database
        # if not self.is_console:
        #     # HTTP Async
        #     from databases import Database
        #     self.db = Database(&#34;mysql://root:techie@127.0.0.1/uvicore_wiki&#34;)
        #     @self.http.on_event(&#34;startup&#34;)
        #     async def startup():
        #         await self.db.connect()

        #     @self.http.on_event(&#34;shutdown&#34;)
        #     async def shutdown():
        #         await self.db.disconnect()
        # else:
        # CLI Sync
        from ..database.db import Database
        self.db = Database(&#34;mysql+pymysql://root:techie@127.0.0.1/uvicore_wiki&#34;)

    def __mount_static_assets(self) -&gt; None:
        # Mount static asset directories
        # Must be after __boot_providers() since packages register view info there
        if self.is_console: return

        from uvicore.http.static import StaticFiles

        # Get all packages asset paths
        paths = []
        for package in self.packages:
            for path in package.asset_paths:
                if path not in paths:
                    paths.append(path)

        # Mount all directories to /assets
        # Last directory defined WINS, which fits our last provider wins
        self.http.mount(&#39;/static&#39;, StaticFiles(directories=paths), name=&#39;static&#39;)

    def __create_template_environment(self) -&gt; None:
        # Instantiate template environment with all paths, filters, tests...
        # Must be after __boot_providers() since packages register view info there
        if self.is_console: return

        # Instantiate template
        self.template = templates.Jinja()

        # Add all package view paths to template environment
        for package in self.packages:
            for path in package.view_paths:
                self.template.include_path(path)

        # Add all package template options to template environment
        options = package.template_options
        if &#39;context_functions&#39; in options:
            for f in options[&#39;context_functions&#39;]:
                self.template.include_context_function(**f)
        if &#39;context_filters&#39; in options:
            for f in options[&#39;context_filters&#39;]:
                self.template.include_context_filter(**f)
        if &#39;filters&#39; in options:
            for f in options[&#39;filters&#39;]:
                self.template.include_filter(**f)
        if &#39;tests&#39; in options:
            for f in options[&#39;tests&#39;]:
                self.template.include_test(**f)

        # Create new template environment
        self.template.init()

    def __register_providers(self) -&gt; None:
        self.perf(&#39;|--registering providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Instantiate the provider and call boot()
            provider = load(path).mod()
            provider.register(self)
        self.registered = True

    def __merge_providers(self) -&gt; None:
        self.perf(&#39;|--merging providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Load this packages config/app.py and merge into package config
            app_config = load(app + &#39;.config.app.app&#39;).mod
            config_prefix = app_config.get(&#39;config_prefix&#39;)
            app_name = app_config.get(&#39;name&#39;)
            self.config.set(config_prefix + &#39;.app&#39;, app_config)

            # Load this packages main config
            package_config = self.config(config_prefix)

            # Main app
            main = True if app_name == self.name else False

            # Route prefix
            web_route_prefix = None
            api_route_prefix = None
            if &#39;route&#39; in package_config:
                web_route_prefix = package_config.get(&#39;route&#39;).get(&#39;web_prefix&#39;)
                api_route_prefix = package_config.get(&#39;route&#39;).get(&#39;api_prefix&#39;)

            # Database connections
            connections = []
            if &#39;database&#39; in package_config:
                for name, connection in package_config.get(&#39;database&#39;).get(&#39;connections&#39;).items():
                    url = (connection.get(&#39;driver&#39;)
                        + &#39;+&#39; + connection.get(&#39;dialect&#39;)
                        + &#39;://&#39; + connection.get(&#39;username&#39;)
                        + &#39;:&#39; + connection.get(&#39;password&#39;)
                        + &#39;@&#39; + connection.get(&#39;host&#39;)
                        + &#39;:&#39; + str(connection.get(&#39;port&#39;))
                        + &#39;/&#39; + connection.get(&#39;database&#39;))
                    #self.db = Database(&#34;mysql+pymysql://root:techie@127.0.0.1/uvicore_wiki&#34;)
                    connections.append(Connection(
                        name=name,
                        default=True if name == package_config.get(&#39;database&#39;).get(&#39;default&#39;) else False,
                        driver=connection.get(&#39;driver&#39;),
                        dialect=connection.get(&#39;dialect&#39;),
                        host=connection.get(&#39;host&#39;),
                        port=connection.get(&#39;port&#39;),
                        database=connection.get(&#39;database&#39;),
                        username=connection.get(&#39;username&#39;),
                        password=connection.get(&#39;password&#39;),
                        prefix=connection.get(&#39;prefix&#39;),
                        url=url,
                    ))

            # Modules file path
            package = uvicore.Package(
                name=app_config.get(&#39;name&#39;),
                vendor=app_config.get(&#39;vendor&#39;),
                module=app_config.get(&#39;module&#39;),
                location=location(app_config.get(&#39;module&#39;)),
                main=main,
                config_prefix=app_config.get(&#39;config_prefix&#39;),
                web_route_prefix=web_route_prefix,
                api_route_prefix=api_route_prefix,
                view_paths=[],
                asset_paths=[],
                template_options={},
                register_web_routes=True if package_config.get(&#39;register_web_routes&#39;) else False,
                register_api_routes=True if package_config.get(&#39;register_api_routes&#39;) else False,
                register_views=True if package_config.get(&#39;register_views&#39;) else False,
                register_assets=True if package_config.get(&#39;register_assets&#39;) else False,
                register_commands=True if package_config.get(&#39;register_commands&#39;) else False,
                connections=connections,
            )
            self.packages.append(package)

    def __boot_providers(self) -&gt; None:
        self.perf(&#39;|--booting providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Get this providers package
            package = self.package(module=app)

            # Import the provider and call boot()
            provider = load(path).mod()
            provider.boot(self, package)
        self.booted = True
        self.perf(&#39;--&#39; + str(self.providers))

    def __build_provider_graph_DICT(self, module: str, package: str = None) -&gt; None:
        if package:
            self.providers[module] = package
        app_config = load(module + &#39;.config.app.app&#39;).mod
        packages = app_config[&#39;packages&#39;]
        for package in packages:
            if package.get(&#39;module&#39;) not in self.providers:
                return self.__build_provider_graph(package.get(&#39;module&#39;), package)
        return providers

    def __build_provider_graph(self, app: str, module: str = None) -&gt; None:
        if module:
            self.providers.append((app, module))
        app_config = load(app + &#39;.config.app.app&#39;).mod
        providers = app_config[&#39;providers&#39;]
        for (app, module) in providers:
            #app, module = provider
            #path = app + &#39;.&#39; + module
            if (app, module) not in self.providers:
                self.__build_provider_graph(app, module)

    def package(self, name: str = None, module: str = None, main: bool = False) -&gt; PackageInterface:
        if name:
            return next(package for package in self.packages if package.name == name)
        elif module:
            return next(package for package in self.packages if package.module == module)
        elif main:
            return next(package for package in self.packages if package.main == True)

    def perf(self, item) -&gt; None:
        if self.debug:
            self.perfs.append(item)
            print(item)

    def dump(self, *args) -&gt; None:
        dump(*args)

    def dd(self, *args) -&gt; None:
        dd(*args)


# Application class from IoC
Application = uvicore.ioc.make(&#39;Application&#39;)


__all__ = [&#39;Application&#39;]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="uvicore.foundation.application._Application"><code class="flex name class">
<span>class <span class="ident">Application</span></span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class _Application(ApplicationInterface):

    # Version and debug
    version: str = uvicore.__version__
    debug: bool = False
    perfs: List = []

    # Core Applications and Access Points
    http: ServerInterface = None
    template: TemplateInterface = None
    cli: cli = None
    config: ConfigInterface = None

    # Providers and Configs
    providers: List[Tuple] = []

    # App info
    registered: bool = False
    booted: bool = False
    is_console: bool = False
    is_http: bool = False
    is_async: bool = False

    # Packages and Parent
    packages: List[PackageInterface] = []
    path: str = None
    name: str = None
    vendor: str = None
    module: str = None

    def __init__(self):
        # Instantiate uvicore singletons
        uvicore.config = Config()

        # Pass through attributes
        self.config = uvicore.config

    def bootstrap(self, app_config: Dict, path: str, is_console: bool) -&gt; None:
        # Don&#39;t bootstrap multiple times
        if self.booted: return self

        # App name and base_path
        self.path = path
        self.name = app_config.get(&#39;name&#39;)
        self.vendor = app_config.get(&#39;vendor&#39;)
        self.module = app_config.get(&#39;module&#39;)

        # Detect if running in console (to register commands)
        # Ensure console is False even when running ./uvicore http serve
        self.is_console = is_console
        if &#34;&#39;http&#39;, &#39;serve&#39;&#34; in str(sys.argv):
            self.is_console = False
        self.is_http = not self.is_console

        # Always set the cli instance, though commands won&#39;t be added if not is_console
        self.cli = cli

        # Add main app config
        self.config.set(&#39;app&#39;, app_config)

        # Detect debug flag from main app config
        self.debug = app_config[&#39;debug&#39;]

        # Perf
        self.perf(&#39;|-foundation.application.bootstrap()&#39;)
        self.perf(&#39;|--is_console: &#39; + str(self.is_console))

        # Build recursive providers graph
        self.__build_provider_graph(self.module)

        # Register all providers
        self.__register_providers()

        # Merge Providers (merges configs and creates actual Package class)
        self.__merge_providers()

        # Create HTTP Server instance
        self.__create_http_server()

        # Create Database instance
        self.__create_database_instance()

        # Boot all providers
        self.__boot_providers()

        # Mount static asset route
        self.__mount_static_assets()

        # Create templating Environment
        self.__create_template_environment()

        # Return application
        return self

    def __create_http_server(self) -&gt; None:
        if self.is_http:
            self.perf(&#39;|--firing up HTTP server&#39;)
            from uvicore.http import Server
            self.http = Server(
                debug=self.config(&#39;app.debug&#39;),
                title=self.config(&#39;app.openapi.title&#39;),
                version=uvicore.__version__,
                openapi_url=self.config(&#39;app.openapi.url&#39;),
                docs_url=self.config(&#39;app.openapi.docs_url&#39;),
                redoc_url=self.config(&#39;app.openapi.redoc_url&#39;),
            )
            self.is_async = True

    def __create_database_instance(self) -&gt; None:
        # Fire up Database
        # if not self.is_console:
        #     # HTTP Async
        #     from databases import Database
        #     self.db = Database(&#34;mysql://root:techie@127.0.0.1/uvicore_wiki&#34;)
        #     @self.http.on_event(&#34;startup&#34;)
        #     async def startup():
        #         await self.db.connect()

        #     @self.http.on_event(&#34;shutdown&#34;)
        #     async def shutdown():
        #         await self.db.disconnect()
        # else:
        # CLI Sync
        from ..database.db import Database
        self.db = Database(&#34;mysql+pymysql://root:techie@127.0.0.1/uvicore_wiki&#34;)

    def __mount_static_assets(self) -&gt; None:
        # Mount static asset directories
        # Must be after __boot_providers() since packages register view info there
        if self.is_console: return

        from uvicore.http.static import StaticFiles

        # Get all packages asset paths
        paths = []
        for package in self.packages:
            for path in package.asset_paths:
                if path not in paths:
                    paths.append(path)

        # Mount all directories to /assets
        # Last directory defined WINS, which fits our last provider wins
        self.http.mount(&#39;/static&#39;, StaticFiles(directories=paths), name=&#39;static&#39;)

    def __create_template_environment(self) -&gt; None:
        # Instantiate template environment with all paths, filters, tests...
        # Must be after __boot_providers() since packages register view info there
        if self.is_console: return

        # Instantiate template
        self.template = templates.Jinja()

        # Add all package view paths to template environment
        for package in self.packages:
            for path in package.view_paths:
                self.template.include_path(path)

        # Add all package template options to template environment
        options = package.template_options
        if &#39;context_functions&#39; in options:
            for f in options[&#39;context_functions&#39;]:
                self.template.include_context_function(**f)
        if &#39;context_filters&#39; in options:
            for f in options[&#39;context_filters&#39;]:
                self.template.include_context_filter(**f)
        if &#39;filters&#39; in options:
            for f in options[&#39;filters&#39;]:
                self.template.include_filter(**f)
        if &#39;tests&#39; in options:
            for f in options[&#39;tests&#39;]:
                self.template.include_test(**f)

        # Create new template environment
        self.template.init()

    def __register_providers(self) -&gt; None:
        self.perf(&#39;|--registering providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Instantiate the provider and call boot()
            provider = load(path).mod()
            provider.register(self)
        self.registered = True

    def __merge_providers(self) -&gt; None:
        self.perf(&#39;|--merging providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Load this packages config/app.py and merge into package config
            app_config = load(app + &#39;.config.app.app&#39;).mod
            config_prefix = app_config.get(&#39;config_prefix&#39;)
            app_name = app_config.get(&#39;name&#39;)
            self.config.set(config_prefix + &#39;.app&#39;, app_config)

            # Load this packages main config
            package_config = self.config(config_prefix)

            # Main app
            main = True if app_name == self.name else False

            # Route prefix
            web_route_prefix = None
            api_route_prefix = None
            if &#39;route&#39; in package_config:
                web_route_prefix = package_config.get(&#39;route&#39;).get(&#39;web_prefix&#39;)
                api_route_prefix = package_config.get(&#39;route&#39;).get(&#39;api_prefix&#39;)

            # Database connections
            connections = []
            if &#39;database&#39; in package_config:
                for name, connection in package_config.get(&#39;database&#39;).get(&#39;connections&#39;).items():
                    url = (connection.get(&#39;driver&#39;)
                        + &#39;+&#39; + connection.get(&#39;dialect&#39;)
                        + &#39;://&#39; + connection.get(&#39;username&#39;)
                        + &#39;:&#39; + connection.get(&#39;password&#39;)
                        + &#39;@&#39; + connection.get(&#39;host&#39;)
                        + &#39;:&#39; + str(connection.get(&#39;port&#39;))
                        + &#39;/&#39; + connection.get(&#39;database&#39;))
                    #self.db = Database(&#34;mysql+pymysql://root:techie@127.0.0.1/uvicore_wiki&#34;)
                    connections.append(Connection(
                        name=name,
                        default=True if name == package_config.get(&#39;database&#39;).get(&#39;default&#39;) else False,
                        driver=connection.get(&#39;driver&#39;),
                        dialect=connection.get(&#39;dialect&#39;),
                        host=connection.get(&#39;host&#39;),
                        port=connection.get(&#39;port&#39;),
                        database=connection.get(&#39;database&#39;),
                        username=connection.get(&#39;username&#39;),
                        password=connection.get(&#39;password&#39;),
                        prefix=connection.get(&#39;prefix&#39;),
                        url=url,
                    ))

            # Modules file path
            package = uvicore.Package(
                name=app_config.get(&#39;name&#39;),
                vendor=app_config.get(&#39;vendor&#39;),
                module=app_config.get(&#39;module&#39;),
                location=location(app_config.get(&#39;module&#39;)),
                main=main,
                config_prefix=app_config.get(&#39;config_prefix&#39;),
                web_route_prefix=web_route_prefix,
                api_route_prefix=api_route_prefix,
                view_paths=[],
                asset_paths=[],
                template_options={},
                register_web_routes=True if package_config.get(&#39;register_web_routes&#39;) else False,
                register_api_routes=True if package_config.get(&#39;register_api_routes&#39;) else False,
                register_views=True if package_config.get(&#39;register_views&#39;) else False,
                register_assets=True if package_config.get(&#39;register_assets&#39;) else False,
                register_commands=True if package_config.get(&#39;register_commands&#39;) else False,
                connections=connections,
            )
            self.packages.append(package)

    def __boot_providers(self) -&gt; None:
        self.perf(&#39;|--booting providers&#39;)
        for (app, module) in self.providers:
            path = app + &#39;.&#39; + module
            self.perf(&#39;|---&#39; + path)

            # Get this providers package
            package = self.package(module=app)

            # Import the provider and call boot()
            provider = load(path).mod()
            provider.boot(self, package)
        self.booted = True
        self.perf(&#39;--&#39; + str(self.providers))

    def __build_provider_graph_DICT(self, module: str, package: str = None) -&gt; None:
        if package:
            self.providers[module] = package
        app_config = load(module + &#39;.config.app.app&#39;).mod
        packages = app_config[&#39;packages&#39;]
        for package in packages:
            if package.get(&#39;module&#39;) not in self.providers:
                return self.__build_provider_graph(package.get(&#39;module&#39;), package)
        return providers

    def __build_provider_graph(self, app: str, module: str = None) -&gt; None:
        if module:
            self.providers.append((app, module))
        app_config = load(app + &#39;.config.app.app&#39;).mod
        providers = app_config[&#39;providers&#39;]
        for (app, module) in providers:
            #app, module = provider
            #path = app + &#39;.&#39; + module
            if (app, module) not in self.providers:
                self.__build_provider_graph(app, module)

    def package(self, name: str = None, module: str = None, main: bool = False) -&gt; PackageInterface:
        if name:
            return next(package for package in self.packages if package.name == name)
        elif module:
            return next(package for package in self.packages if package.module == module)
        elif main:
            return next(package for package in self.packages if package.main == True)

    def perf(self, item) -&gt; None:
        if self.debug:
            self.perfs.append(item)
            print(item)

    def dump(self, *args) -&gt; None:
        dump(*args)

    def dd(self, *args) -&gt; None:
        dd(*args)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="uvicore.contracts.application.Application" href="../contracts/application.html#uvicore.contracts.application.Application">Application</a></li>
<li>abc.ABC</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="uvicore.foundation.application._Application.booted"><code class="name">var <span class="ident">booted</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.cli"><code class="name">var <span class="ident">cli</span> : NoneType</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.config"><code class="name">var <span class="ident">config</span> : <a title="uvicore.contracts.config.Config" href="../contracts/config.html#uvicore.contracts.config.Config">Config</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.debug"><code class="name">var <span class="ident">debug</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.http"><code class="name">var <span class="ident">http</span> : <a title="uvicore.contracts.server.Server" href="../contracts/server.html#uvicore.contracts.server.Server">Server</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.is_async"><code class="name">var <span class="ident">is_async</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.is_console"><code class="name">var <span class="ident">is_console</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.is_http"><code class="name">var <span class="ident">is_http</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.module"><code class="name">var <span class="ident">module</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.name"><code class="name">var <span class="ident">name</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.packages"><code class="name">var <span class="ident">packages</span> : List[<a title="uvicore.contracts.package.Package" href="../contracts/package.html#uvicore.contracts.package.Package">Package</a>]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.path"><code class="name">var <span class="ident">path</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.perfs"><code class="name">var <span class="ident">perfs</span> : List</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.providers"><code class="name">var <span class="ident">providers</span> : List[Tuple]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.registered"><code class="name">var <span class="ident">registered</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.template"><code class="name">var <span class="ident">template</span> : <a title="uvicore.contracts.template.Template" href="../contracts/template.html#uvicore.contracts.template.Template">Template</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.vendor"><code class="name">var <span class="ident">vendor</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="uvicore.foundation.application._Application.version"><code class="name">var <span class="ident">version</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="uvicore.foundation.application._Application.bootstrap"><code class="name flex">
<span>def <span class="ident">bootstrap</span></span>(<span>self, app_config: Dict, path: str, is_console: bool) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bootstrap(self, app_config: Dict, path: str, is_console: bool) -&gt; None:
    # Don&#39;t bootstrap multiple times
    if self.booted: return self

    # App name and base_path
    self.path = path
    self.name = app_config.get(&#39;name&#39;)
    self.vendor = app_config.get(&#39;vendor&#39;)
    self.module = app_config.get(&#39;module&#39;)

    # Detect if running in console (to register commands)
    # Ensure console is False even when running ./uvicore http serve
    self.is_console = is_console
    if &#34;&#39;http&#39;, &#39;serve&#39;&#34; in str(sys.argv):
        self.is_console = False
    self.is_http = not self.is_console

    # Always set the cli instance, though commands won&#39;t be added if not is_console
    self.cli = cli

    # Add main app config
    self.config.set(&#39;app&#39;, app_config)

    # Detect debug flag from main app config
    self.debug = app_config[&#39;debug&#39;]

    # Perf
    self.perf(&#39;|-foundation.application.bootstrap()&#39;)
    self.perf(&#39;|--is_console: &#39; + str(self.is_console))

    # Build recursive providers graph
    self.__build_provider_graph(self.module)

    # Register all providers
    self.__register_providers()

    # Merge Providers (merges configs and creates actual Package class)
    self.__merge_providers()

    # Create HTTP Server instance
    self.__create_http_server()

    # Create Database instance
    self.__create_database_instance()

    # Boot all providers
    self.__boot_providers()

    # Mount static asset route
    self.__mount_static_assets()

    # Create templating Environment
    self.__create_template_environment()

    # Return application
    return self</code></pre>
</details>
</dd>
<dt id="uvicore.foundation.application._Application.dd"><code class="name flex">
<span>def <span class="ident">dd</span></span>(<span>self, *args) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dd(self, *args) -&gt; None:
    dd(*args)</code></pre>
</details>
</dd>
<dt id="uvicore.foundation.application._Application.dump"><code class="name flex">
<span>def <span class="ident">dump</span></span>(<span>self, *args) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dump(self, *args) -&gt; None:
    dump(*args)</code></pre>
</details>
</dd>
<dt id="uvicore.foundation.application._Application.package"><code class="name flex">
<span>def <span class="ident">package</span></span>(<span>self, name: str = None, module: str = None, main: bool = False) ‑> <a title="uvicore.contracts.package.Package" href="../contracts/package.html#uvicore.contracts.package.Package">Package</a></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def package(self, name: str = None, module: str = None, main: bool = False) -&gt; PackageInterface:
    if name:
        return next(package for package in self.packages if package.name == name)
    elif module:
        return next(package for package in self.packages if package.module == module)
    elif main:
        return next(package for package in self.packages if package.main == True)</code></pre>
</details>
</dd>
<dt id="uvicore.foundation.application._Application.perf"><code class="name flex">
<span>def <span class="ident">perf</span></span>(<span>self, item) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def perf(self, item) -&gt; None:
    if self.debug:
        self.perfs.append(item)
        print(item)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="uvicore.foundation" href="index.html">uvicore.foundation</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="uvicore.foundation.application._Application" href="#uvicore.foundation.application._Application">_Application</a></code></h4>
<ul class="two-column">
<li><code><a title="uvicore.foundation.application._Application.booted" href="#uvicore.foundation.application._Application.booted">booted</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.bootstrap" href="#uvicore.foundation.application._Application.bootstrap">bootstrap</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.cli" href="#uvicore.foundation.application._Application.cli">cli</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.config" href="#uvicore.foundation.application._Application.config">config</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.dd" href="#uvicore.foundation.application._Application.dd">dd</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.debug" href="#uvicore.foundation.application._Application.debug">debug</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.dump" href="#uvicore.foundation.application._Application.dump">dump</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.http" href="#uvicore.foundation.application._Application.http">http</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.is_async" href="#uvicore.foundation.application._Application.is_async">is_async</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.is_console" href="#uvicore.foundation.application._Application.is_console">is_console</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.is_http" href="#uvicore.foundation.application._Application.is_http">is_http</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.module" href="#uvicore.foundation.application._Application.module">module</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.name" href="#uvicore.foundation.application._Application.name">name</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.package" href="#uvicore.foundation.application._Application.package">package</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.packages" href="#uvicore.foundation.application._Application.packages">packages</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.path" href="#uvicore.foundation.application._Application.path">path</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.perf" href="#uvicore.foundation.application._Application.perf">perf</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.perfs" href="#uvicore.foundation.application._Application.perfs">perfs</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.providers" href="#uvicore.foundation.application._Application.providers">providers</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.registered" href="#uvicore.foundation.application._Application.registered">registered</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.template" href="#uvicore.foundation.application._Application.template">template</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.vendor" href="#uvicore.foundation.application._Application.vendor">vendor</a></code></li>
<li><code><a title="uvicore.foundation.application._Application.version" href="#uvicore.foundation.application._Application.version">version</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.4</a>.</p>
</footer>
</body>
</html>